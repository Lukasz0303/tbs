<p-card class="user-rank-card">
  <div class="user-rank-content">
    <div class="user-rank-header">
      <h3>{{ 'leaderboard.userRank.title' | translate }}</h3>
      <span class="rank-badge">#{{ ranking().rankPosition }}</span>
    </div>
    
    <div class="user-rank-stats">
      <div class="stat-item">
        <span class="stat-label">{{ 'leaderboard.userRank.points' | translate }}</span>
        <span class="stat-value">{{ ranking().totalPoints }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">{{ 'leaderboard.userRank.gamesPlayed' | translate }}</span>
        <span class="stat-value">{{ ranking().gamesPlayed }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">{{ 'leaderboard.userRank.gamesWon' | translate }}</span>
        <span class="stat-value">{{ ranking().gamesWon }}</span>
      </div>
    </div>

    <p-button
      (onClick)="onShowPlayersAround()"
      [styleClass]="'custom-icon-button'">
      <span class="button-label">{{ 'leaderboard.userRank.showPlayersAround' | translate }}</span>
      <i [class]="showPlayersAround() ? 'pi pi-chevron-up button-icon' : 'pi pi-chevron-down button-icon'"></i>
    </p-button>

    @if (showPlayersAround()) {
      <div class="players-around-section">
        @if (isLoading()) {
          <div class="loading-container">
            <p>{{ 'leaderboard.playersAround.loading' | translate }}</p>
          </div>
        } @else if (players().length === 0) {
          <div class="empty-container">
            <p>{{ 'leaderboard.playersAround.empty' | translate }}</p>
          </div>
        } @else {
          <div class="players-list">
            @for (player of players(); track player.userId) {
              <div class="player-item">
                <div class="player-info">
                  <span class="player-rank">#{{ player.rankPosition }}</span>
                  <span class="player-username">{{ player.username }}</span>
                  <span class="player-points">{{ player.totalPoints }} {{ 'leaderboard.playersAround.points' | translate }}</span>
                </div>
              </div>
            }
          </div>
        }
      </div>
    }
  </div>
</p-card>

